<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Signal Processing - ELEC 240 Labs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Signal Processing";
    var mkdocs_page_input_path = "lab7/exp7.3.md";
    var mkdocs_page_url = "/lab7/exp7.3/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> ELEC 240 Labs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab Home</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../..">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab-report/">Your Lab Report</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools-and-resources/">Tools and Resources</a>
                </li>
                <li class="">
                    
    <a class="" href="../../virtualbench/">VirtualBench</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">References</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../references/patch-cords-and-cables/">Patch Cords and Cables</a>
                </li>
                <li class="">
                    
    <a class="" href="../../references/breadboard/">The Breadboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../references/interface/">The Interface Modules</a>
                </li>
                <li class="">
                    
    <a class="" href="../../references/wiring/">Wiring</a>
                </li>
                <li class="">
                    
    <a class="" href="../../references/color_code/">Resistor Color Code</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 1</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab1/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/safety/">Safety</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/background/">Background</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/experiment_1-1/">DC Measurements: the DMM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/plotting-help/">Plotting Data in Matlab</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/interlude/">Grounds and Grounding</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/experiment_1-2/">The Oscilloscope and Function Generator</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab1/postlude/">Cleaning Up</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 2</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab2/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/background/">Background</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/before-you-begin/">Before You Begin</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/experiment_2-1/">Electroacoustic Transducers I</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/breadboard/">The Breadboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/experiment_2-2/">Electroacoustic Transducers II</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab2/experiment_2-3/">Optoelectronic Signal Sources and Sinks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 3</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab3/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab3/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab3/experiment_3-1/">Resistive Voltage Dividers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab3/interlude/">Measuring the Transfer Function</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab3/experiment_3-2/">Filters and Transfer Function</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 4</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab4/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/file.21/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/file.22/">Before Lab</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/file.23/">Organizing Your Breadboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/exp4.1/">The 741 Op-Amp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/exp4.2/">The Inverting Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/file.24/">Standard Signal Levels</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab4/exp4.3/">Transducer Amplifiers</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 5</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab5/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab5/file.28/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab5/exp5.1/">Building a Function Generator</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab5/exp5.2/">Bode Plots</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 6</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lab6/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab6/file.26/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab6/file.27/">Decibels</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab6/exp6.1/">Measuring Signal Spectrum</a>
                </li>
                <li class="">
                    
    <a class="" href="../../lab6/exp6.2/">The Spectrum of Acoustic Signals</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab 7</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../exp7.1/">Sampling and Quantization</a>
                </li>
                <li class="">
                    
    <a class="" href="../exp7.2/">Recording a Reference Signal</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Signal Processing</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#experiment-73">Experiment 7.3</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#part-a-simple-signal-processing">Part A: Simple Signal Processing</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../exp7.4/">Filtering, Continued</a>
                </li>
                <li class="">
                    
    <a class="" href="../exp7.5/">Some DSP Applications</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Miscellanous Images</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../misc_images/">Home</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">ELEC 240 Labs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Lab 7 &raquo;</li>
        
      
    
    <li>Signal Processing</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>ELEC 240 Lab</p>
<hr />
<h1 id="experiment-73">Experiment 7.3</h1>
<h3 id="part-a-simple-signal-processing">Part A: Simple Signal Processing</h3>
<p>One of the simplest things we can do to a signal is to *scale* it
(i.e. multiply it by a constant). Try: ```matlab out1 = .25 * sig1;
sound(out1, Fs) ``` Or if you're lazy: ```matlab sound(.25 *
sig1) ``` We can also make the signal bigger: ```matlab sound(4 *
sig1) ``` About the simplest thing we can do to *two* signals is to
add them together: ```matlab out2 = sig1 + sig2; ``` Listen to
```out2``` and look at its spectrogram. **Can you identify the
two different signals in both the audible and visual domains?** Both
the A/D converter which digitized the input signal and the D/A converter
which converts the processed samples back to an analog signal have
limited range of values that they can represent. By keeping our input
signal below 5 V we keep it within the range of the A/D converter and
avoid "clipping" the signal. However, when we add two signals together
or send then through systems having a gain greater than one, we may
create an output signal with values too large for the D/A converter to
convert. If this happens you will hear distortion in the output signal.
To avoid this, you can use the ```soundsc()``` command instead of
```sound()```. This command automatically scales the signal value
so that it fits within the range of the D/A converter. Another
interesting thing we can do is *multiply* the two signals together.
Digitally, this is just as easy to do as adding them, but this is very
difficult to do in an analog circuit. ```matlab out3 = sig1 .* sig2;
``` Note the special MATLAB construct ```.*``` denoting point
by point multiplication, as opposed to matrix multiplication. Listen to
```out3``` and look at its spectrogram. Can you identify either of
the two signals in either the aural or visual domains? ### Part B:
Simple Filtering As you saw in ELEC241, filter a digital signal involves
forming a weighted sum of the past input and output samples:</p>
<p>$a_oy(n) = \sum_{k=1}\^{M} a_ky(n-k) + \sum_{k=1}\^{N}
b_kx(n-k)$</p>
<p>Matlab has a function for performing this operation: ```matlab y =
filter(b, a, x); ``` Choosing the values of the $a_k$'s and
$b_k$'s is the art of *filter design,* which we'll look at in the
next part. For now, we'll just try a few simple values for *a* and
*b*. As a tip, record the characteristics of each filter we look at -
you will be asked to summarize each type at the end of experiment 9.4. A
*finite impulse response* (FIR) or non-recursive filter has all the
$a_k$ (except $a_0$) equal to zero, i.e. it is a weighted sum of
input samples. The simplest FIR filter is the *boxcar* filter in which
all the $b_k$ are equal to 1. Define a length 5 boxcar filter:
```matlab a=1; b=[1 1 1 1 1]; ``` Matlab has a function to
compute and display the frequency response of a filter: ```matlab
freqz(b, a) ``` Note that the frequency axis is labeled in terms of
the Nyquist frequency, which is the sampling rate. So for our sampling
rate, 1 corresponds to 5 kHz. Although it is a little distorted because
of the logarithmic scaling, this is a close relative of our old friend
$sin(x)/x$. Also note that the jumps in phase are caused by a change
in sign of the transfer function (the magnitude is always positive).
Taking this into account, the phase is a *linear* function of
frequency. We can also look at the *unit-sample response* of the
filter: ```matlab delta = [1 zeros(1,100)]; y = filter(b, a,
delta); plot(y, '.') ``` As you would expect, the unit-sample
response is a rectangular pulse, which supposedly looks like the side
view of a boxcar. Now let's try applying this filter to our signal:
```matlab out1 = filter(b, a, sig1); ``` Listen to
```out1``` and look at its spectrogram. ```matlab sound(out1,
Fs); specgram(out1, 156, Fs) ``` As you can tell from its frequency
response plot, this is a "sort-of" lowpass filter, though not a very
good one. **Can you tell this by comparing the sound and spectrogram
of the output with the input? What do the blue areas of the spectrogram
correspond to?** Repeat from the beginning of Part B using a length 10
boxcar filter. **What is the relation between the length of the filter
and its frequency response?** An *infinite impulse response* (IIR)
filter has an unit-sample response that doesn't go to zero after a
finite number of samples. IIR filters are usually implemented
*recursively*, i.e. with non-zero $a$ coefficients. Define a first
order recursive filter: ```matlab a=[1, -.9]; b=[1]; ``` Using
the same technique as above, look at its unit-sample and frequency
response. Note that this is also a lowpass filter, with a more
conventional frequency response than the boxcar filter. Apply this
filter to the input signal. Listen to the output and plot its
spectrogram. **Can you tell by listening and looking that this is a
lowpass filter?** An interesting thing happens if we change the sign
of $a_1$: ```matlab a = [1 .9]; ``` Look at the unit-sample
and frequency response of this filter. Apply it to the input signal,
listen to the output, and plot its spectrogram. **What kind of filter
is this?** ### Part C: Fancy Filtering To get filters that are
really effective (i.e. that pass the desired frequencies with minimum
distortion and reject undesired frequencies as strongly as possible), we
need to have a design procedure to find the optimum set of coefficients
for a given specification. If you take ELEC 431, you will learn how to
do this. In the meantime, we will utilize pre-constructed algorithms.
The *Butterworth* filter is one of the classic filter designs. It is
characterized by having the "flattest" possible passband. Unfortunately,
its performance in the stop band is decidedly mediocre. Design a
$5\^{th}$-order lowpass Butterworth filter having a cutoff frequency
of 600 Hz with our 10 kHz sampling frequency and print out their
coefficients: ```matlab [b,a] = butter(5, 600/5000); b a ```
Look at the unit-sample response and the frequency response. Notice how
much closer this is to an ideal low pass filter. Also notice the scale
on the y-axis. For a better comparison with previous plots, try changing
this scale: ```matlab subplot(2,1,1) axis([0 1 -60 0]) ``` Also
note that the phase is not linear. Now apply the filter to our input
signal and listen to the output: ```matlab out=filter(b,a,sig1);
sound(out, Fs) ``` We can also design FIR filters that are
significantly better than our boxcar filter: ```matlab a=1
b=fir1(5,600/5000); ``` Examine the unit-sample and frequency
response of this filter and apply it to the reference signal. FIR
filters really start to get interesting when we build very long ones.
Try the same cutoff frequency with 50 coefficients: ```matlab
b=fir1(50,600/5000); ``` Note that we now have a filter of order 50.
How would you like to design and build an analog (RLC) filter of this
order?! **Look at the unit-sample and frequency response of this
filter. What function does the unit-sample response remind you of?**
Note that this filter has a much more ideal shape than any of the
others. Finally apply this filter to the reference signal. **Can you
tell the difference in the sound or the spectrogram between the effects
of this filter and the length 5 filter?** You will need your signals
```sig1``` and ```sig2``` for the next section.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../exp7.4/" class="btn btn-neutral float-right" title="Filtering, Continued">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../exp7.2/" class="btn btn-neutral" title="Recording a Reference Signal"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../exp7.2/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../exp7.4/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>
      <script src="../../mathjax-config.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
